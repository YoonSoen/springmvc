<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="boardDao"> 
	<select id="listAll" resultType="model.BoardDto">
		SELECT
			no, 
			title,
			content, 
			writer,
			regdate,
			viewcnt
		FROM
			board
		ORDER BY
			no desc,
			regdate desc
	</select>
	<insert id="insert">
		INSERT INTO board(
		no,
		title,
		content,
		writer
	  ) VALUES(
	  (SELECT NVL(MAX(no)+1, 1)FROM board),
	  #{title},
	  #{content},
	  #{writer}
	</insert>
	<select id="view" resultType="model.BoardDto">
		SELECT * FROM board
		WHERE no = #{no}
	</select>
	<update id="increaseViewcnt">
		UPDATE board SET viewcnt = viewcnt + 1
		WHERE no = #{no}
	</update>
	<update id="update">
		UPDATE board SET
			title = #{title},
			content = #{content},
			writer = #{writer}
		WHERE no = #{no}
	</update>
	<delete id="delete">
		DELETE FROM board
		WHERE no = #{no}
	</delete>
	
</mapper>